{"ast":null,"code":"var _jsxFileName = \"/Users/kaitlynbreuil/Desktop/Wyncode-ish/authenticated-blog/client/src/pages/Dashboard.jsx\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Card, Button, Container } from 'react-bootstrap';\nimport axios from 'axios';\nimport { AppContext } from '../context/AppContext';\nimport NavBar from '../components/NavBar';\n\nconst Dashboard = ({\n  history\n}) => {\n  const {\n    user,\n    loggedIn\n  } = useContext(AppContext);\n  const [myBlogs, setMyBlogs] = useState([]);\n  const token = localStorage.getItem('token'); // useEffect(() => {\n  //   if (user && token) {\n  //     axios\n  //       .get('/blogs/user', {\n  //         headers: { Authorization: `Bearer ${token}` }\n  //       })\n  //       .then((response) => console.log(response));\n  //   }\n  // }, [user, setMyBlogs, myBlogs]);\n\n  useEffect(id => {\n    if (token && user) {\n      axios.get(`/blogs/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(({\n        data\n      }) => {\n        setMyBlogs(data);\n        console.log(data);\n      }).catch(e => console.log(e.message.toString()));\n    }\n  }, [token, user, myBlogs, setMyBlogs]);\n\n  const addNewBlog = () => {\n    if (user) {\n      history.push('/add');\n    }\n  };\n\n  const editBlog = () => {};\n\n  const deleteBlog = (id, req, res) => {\n    try {\n      axios({\n        method: 'DELETE',\n        url: `/blogs/${id}`,\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      res.json('Item has been deleted');\n      console.log('is it here?');\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NavBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, \"Welcome to your Dashboard!\"), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, \"Your Blog Posts\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: addNewBlog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, \"Add a Blog\"), myBlogs.map(blog => /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, blog.title), /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, blog.text), /*#__PURE__*/React.createElement(Card.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, \"Edit\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: {\n      deleteBlog\n    },\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, \"X\"))))));\n};\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/kaitlynbreuil/Desktop/Wyncode-ish/authenticated-blog/client/src/pages/Dashboard.jsx"],"names":["React","useContext","useEffect","useState","Card","Button","Container","axios","AppContext","NavBar","Dashboard","history","user","loggedIn","myBlogs","setMyBlogs","token","localStorage","getItem","id","get","headers","Authorization","then","data","console","log","catch","e","message","toString","addNewBlog","push","editBlog","deleteBlog","req","res","method","url","json","err","map","blog","title","text"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { Card, Button, Container } from 'react-bootstrap';\nimport axios from 'axios';\nimport { AppContext } from '../context/AppContext';\nimport NavBar from '../components/NavBar';\n\nconst Dashboard = ({ history }) => {\n  const { user, loggedIn } = useContext(AppContext);\n  const [myBlogs, setMyBlogs] = useState([]);\n  const token = localStorage.getItem('token');\n\n  // useEffect(() => {\n  //   if (user && token) {\n  //     axios\n  //       .get('/blogs/user', {\n  //         headers: { Authorization: `Bearer ${token}` }\n  //       })\n  //       .then((response) => console.log(response));\n  //   }\n  // }, [user, setMyBlogs, myBlogs]);\n\n  useEffect(\n    (id) => {\n      if (token && user) {\n        axios\n          .get(`/blogs/${id}`, {\n            headers: { Authorization: `Bearer ${token}` }\n          })\n          .then(({ data }) => {\n            setMyBlogs(data);\n            console.log(data);\n          })\n          .catch((e) => console.log(e.message.toString()));\n      }\n    },\n    [token, user, myBlogs, setMyBlogs]\n  );\n\n  const addNewBlog = () => {\n    if (user) {\n      history.push('/add');\n    }\n  };\n  const editBlog = () => {};\n\n  const deleteBlog = (id, req, res) => {\n    try {\n      axios({\n        method: 'DELETE',\n        url: `/blogs/${id}`,\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      res.json('Item has been deleted');\n      console.log('is it here?');\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return (\n    <div>\n      <NavBar />\n      <h3>Welcome to your Dashboard!</h3>\n      <Container>\n        <h4>Your Blog Posts</h4>\n        <Button onClick={addNewBlog}>Add a Blog</Button>\n        {myBlogs.map((blog) => (\n          <Card>\n            <Card.Body>{blog.title}</Card.Body>\n            <Card.Body>{blog.text}</Card.Body>\n            <Card.Footer>\n              <Button variant=\"primary\">Edit</Button>\n              <Button onClick={{ deleteBlog }} variant=\"danger\">\n                X\n              </Button>\n            </Card.Footer>\n          </Card>\n        ))}\n      </Container>\n    </div>\n  );\n};\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}